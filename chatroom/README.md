# chatroom

golang 实现的简单的聊天室样例

# 功能

用 websocket 协议实现的简单的聊天室;

#背景
用 golang 实现功能时，常用到一些函数、语法。为了避免每次都百度，急需一个合适的 demo 项目把常用的操作整合到一起。显然，聊天室是最好的选择。
不仅如此，许多远程操作、云游戏等项目也需要有类似聊天室的设计，可以说，写一个精简可执行的 demo 是非常有必要的。

# 编译

```bash
sh package.sh
```

# 目录及介绍

```
└────chatroom
	└────html
    └────js          //js库
    └────chat.html   //简单的聊天网页
	└────config.ini //配置文件
	└────chatroom   //可执行程序
	└────start.sh   //启动脚本
	└────stop.sh    //停止脚本
```

# 启动

```bash
sh start.sh
```

# 停止

```bash
sh stop.sh
```

# 配置

```
my_name = chatroom

[websocket]
#访问的端口
listen_port     = 8688
#抓取的日志的存储路径
ynbs_log_addr   = data
```

# 部署

## 可执行程序部分

直接将压缩包解压到指定目录，然后执行 start.sh 启动即可;

## 网页部分

1. 将 html 目录放到 httpserver 的访问目录中;
2. 将 chatroom.js 中的 wsAddr 变量的地址改为 chatroom 可执行程序提供的 websocket 服务地址;
3. 用网页访问 chatroom.html 即可实现远程诊断功能。

## 验证

主要功能点如下：

1. 登录;
2. 创建房间;
3. 退出房间;
4. 获取房间列表;
5. 进入房间;
6. 发送消息;

# 使用说明

配置启动 chatroom 之后，用浏览器打开 chatroom.html
登录：在登录左边的框中输入用户明，点击“登录”按钮，可以看见左侧的消息框中有服务端的返回消息；
创建房间：用户在房间中聊天，所以必须创建房间后才能聊天。点击“创建房间”按钮即可创建房间；
退出房间：样例设计是游戏中的聊天室，所以同一个用户同一时间只能在一个房间中，所以当要加入到其他房间时，需要先退出当前房间，点击“退出房间”按钮，即可退出房间；
获取房间列表：当需要与其他用户聊天时，必须加入相同的聊天室，才能聊天，首先要获取聊天室信息，点击“获取房间列表”，结果会展示在“房间列表”标题下，点击指定的 ID 就可以进入该房间；
进入房间：需要先知道要交流的用户在哪个房间，然后进入该房间才能与之聊天；
发送消息：在网页底部的输入框中输入内容，点击“发送”消息会发送到其他客户端中。
